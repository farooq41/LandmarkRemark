<div class="container">
  <form (ngSubmit)="onSubmit(g)" #g="ngForm">

    <div class="row form-group" style="margin-top:10px;" role="alert" [hidden]="!errorResponse">
      <span class="col-sm-6 alert alert-danger">
          {{errorResponse}}
      </span>      
    </div>

    <h3 class="">Login</h3>
  
    <div class="row">
  
      <div class="col-sm-6 form-group">
  
        <label for="username">User Name</label>

        <input type="text" id="username" name="username" class="form-control" [(ngModel)]="user.username" #username="ngModel" required pattern="[a-zA-Z0-9.-]*"/>
  
        <div *ngIf="username.invalid && (username.dirty || username.touched)"
          class="alert alert-danger">

          <div *ngIf="username.errors.required">
            UserName is required.
          </div>
          <div *ngIf="username.errors.pattern">
            User Name can only contain alphanumeric, a dot and a hyphen
          </div>        
        </div>

  
    </div>
    </div>

    <div class="row">
  
      <div class="col-sm-6 form-group">
  
        <label for="password">Password</label>

        <input type="password" id="password" name="password" class="form-control" #password="ngModel" [(ngModel)]="user.password" required />

        <div *ngIf="password.invalid && (password.dirty || password.touched)"
          class="alert alert-danger">

          <div *ngIf="password.errors.required">
            Password is required.
          </div>    
        </div>
  
      </div>
  
    </div>

    <div class="row" *ngIf="register;">
  
      <div class="col-sm-6 form-group">
  
        <label for="email">Email</label>

        <input type="email" id="email" name="email" class="form-control" [(ngModel)]="user.email" email required #email="ngModel" />

        <div *ngIf="email.invalid && (email.dirty || email.touched)"
        class="alert alert-danger">

        <div *ngIf="email.errors.required">
          Email is required.
        </div> 
        <div *ngIf="email.errors.email">
          Email is invalid.
        </div>    
      </div>
        
      </div>
  
    </div>

    <div class="row">
  
      <div class="col-sm-6">
  
        <button id="loginButton" *ngIf="!register; else firstTime" class="btn btn-success col-sm-2 has-spinner submitBtn" [class.spinner]="submitted" type="submit" [disabled]="!g.valid || submitted">
          Login
        </button>
        <ng-template #firstTime>
          <button class="btn btn-success col-sm-3 has-spinner submitBtn" type="submit" [disabled]="!g.valid || submitted">
            Register</button>
          <button class="btn btn-primary col-sm-3" style="margin-left:10px;" type="button" (click)="onCancel()" >Cancel</button>
        </ng-template>
        
  
      </div>
  
    </div>
  
  </form>



  <div *ngIf="!register" class="row col-sm-12 form-group" style="margin-top: 10px;">

    <p class="message">Not registered? <a (click)="onRegister();  g.reset(); errorResponse='';" href="#">Create an account</a></p>

  </div>
  

</div>